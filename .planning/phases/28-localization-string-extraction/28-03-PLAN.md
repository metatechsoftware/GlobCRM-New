---
phase: 28-localization-string-extraction
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - globcrm-web/src/assets/i18n/activities/en.json
  - globcrm-web/src/assets/i18n/activities/tr.json
  - globcrm-web/src/assets/i18n/products/en.json
  - globcrm-web/src/assets/i18n/products/tr.json
  - globcrm-web/src/assets/i18n/quotes/en.json
  - globcrm-web/src/assets/i18n/quotes/tr.json
  - globcrm-web/src/assets/i18n/requests/en.json
  - globcrm-web/src/assets/i18n/requests/tr.json
  - globcrm-web/src/app/features/activities/activities.routes.ts
  - globcrm-web/src/app/features/products/products.routes.ts
  - globcrm-web/src/app/features/quotes/quotes.routes.ts
  - globcrm-web/src/app/features/requests/requests.routes.ts
autonomous: true
requirements:
  - LOCL-03
  - LOCL-10

must_haves:
  truths:
    - "Activity list, detail, form, kanban, and calendar pages render all labels in the selected language"
    - "Product list, detail, and form pages render all labels in the selected language"
    - "Quote list and detail pages render all labels in the selected language"
    - "Request list, detail, and form pages render all labels in the selected language"
  artifacts:
    - path: "globcrm-web/src/assets/i18n/activities/en.json"
      provides: "Activities feature English translations"
      contains: "list"
    - path: "globcrm-web/src/assets/i18n/activities/tr.json"
      provides: "Activities feature Turkish translations"
      contains: "list"
    - path: "globcrm-web/src/assets/i18n/products/en.json"
      provides: "Products feature English translations"
      contains: "list"
    - path: "globcrm-web/src/assets/i18n/quotes/en.json"
      provides: "Quotes feature English translations"
      contains: "list"
    - path: "globcrm-web/src/assets/i18n/requests/en.json"
      provides: "Requests feature English translations"
      contains: "list"
  key_links:
    - from: "globcrm-web/src/app/features/activities/activities.routes.ts"
      to: "globcrm-web/src/assets/i18n/activities/en.json"
      via: "provideTranslocoScope('activities')"
      pattern: "provideTranslocoScope.*activities"
    - from: "globcrm-web/src/app/features/products/products.routes.ts"
      to: "globcrm-web/src/assets/i18n/products/en.json"
      via: "provideTranslocoScope('products')"
      pattern: "provideTranslocoScope.*products"
    - from: "globcrm-web/src/app/features/quotes/quotes.routes.ts"
      to: "globcrm-web/src/assets/i18n/quotes/en.json"
      via: "provideTranslocoScope('quotes')"
      pattern: "provideTranslocoScope.*quotes"
    - from: "globcrm-web/src/app/features/requests/requests.routes.ts"
      to: "globcrm-web/src/assets/i18n/requests/en.json"
      via: "provideTranslocoScope('requests')"
      pattern: "provideTranslocoScope.*requests"
---

<objective>
Create translation scopes and extract all hardcoded strings for CRM operational features: activities, products, quotes, and requests.

Purpose: These four features represent the operational backbone of the CRM (tasks/meetings, product catalog, quoting, service requests). Activities is the most complex with kanban + calendar views and ~60 strings. Products, quotes, and requests each have ~40-50 strings.

Output: Four new translation scopes with EN/TR JSON files, route wiring, and all component templates using transloco pipe.
</objective>

<execution_context>
@C:/Users/maliy/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/maliy/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-localization-string-extraction/28-CONTEXT.md
@.planning/phases/28-localization-string-extraction/28-RESEARCH.md
@.planning/phases/27-localization-foundation/27-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create activities and products translation scope JSON files, wire routes, and replace template strings</name>
  <files>
    globcrm-web/src/assets/i18n/activities/en.json
    globcrm-web/src/assets/i18n/activities/tr.json
    globcrm-web/src/assets/i18n/products/en.json
    globcrm-web/src/assets/i18n/products/tr.json
    globcrm-web/src/app/features/activities/activities.routes.ts
    globcrm-web/src/app/features/products/products.routes.ts
  </files>
  <action>
**Activities scope:**

1. Read ALL component files under `features/activities/` (list, detail, form -- which may be inline template, kanban, calendar views). Catalog every hardcoded English string.

2. Create `assets/i18n/activities/en.json` and `tr.json` with keys organized by page section:
   - `title`: "Activities"
   - `list.*`: title, subtitle, addButton, empty state, type filter labels (Call, Meeting, Task, Email, etc.)
   - `detail.*`: title, tabs, field labels (subject, type, status, dueDate, priority, owner, relatedEntity, description, location, duration, created, lastUpdated), section headers, empty states
   - `form.*`: createTitle, editTitle, field labels, validation messages
   - `kanban.*`: board labels, status column headers (Open, In Progress, Completed, etc.)
   - `calendar.*`: calendar-specific labels if any
   - `messages.*`: all snackbar messages (save, delete, status change success/failure)

3. Wire `provideTranslocoScope('activities')` in activities.routes.ts following the contacts pattern.

4. Add `TranslocoPipe` to all activity component imports. Replace all hardcoded strings with transloco pipe references. For snackBar.open() calls, inject `TranslocoService` and use `translate()`.

**Products scope:**

1. Read ALL component files under `features/products/` (list, detail, form). Catalog every hardcoded string.

2. Create `assets/i18n/products/en.json` and `tr.json`:
   - `title`: "Products"
   - `list.*`: title, subtitle, addButton, empty state
   - `detail.*`: title, tabs, field labels (name, code/sku, category, unitPrice, currency, unit, description, isActive, created, lastUpdated), section headers, empty states
   - `form.*`: createTitle, editTitle, field labels
   - `messages.*`: all snackbar messages

3. Wire `provideTranslocoScope('products')` in products.routes.ts.

4. Add `TranslocoPipe` to all product component imports. Replace all hardcoded strings.

Turkish translations: Use formal "siz" form. Activities = "Aktiviteler", Products = "Urunler". Activity types: Call = "Arama", Meeting = "Toplanti", Task = "Gorev", Email = "E-posta". Status labels: keep professional CRM vocabulary.

For common labels (Save, Cancel, Delete, Edit, OK), use global `common.*` keys.

CRITICAL: Read every component template file before writing JSON.
  </action>
  <verify>
Run `cd globcrm-web && npx ng build --configuration development 2>&1 | head -50`. Verify scope wiring: `grep -rn "provideTranslocoScope" src/app/features/activities/ src/app/features/products/ --include="*.ts"`. Verify key parity for each scope's en.json vs tr.json.
  </verify>
  <done>Activities and products scopes created with EN/TR JSON files, routes wired, all component templates using transloco pipe, all snackbar calls translated. Angular builds without errors.</done>
</task>

<task type="auto">
  <name>Task 2: Create quotes and requests translation scope JSON files, wire routes, and replace template strings</name>
  <files>
    globcrm-web/src/assets/i18n/quotes/en.json
    globcrm-web/src/assets/i18n/quotes/tr.json
    globcrm-web/src/assets/i18n/requests/en.json
    globcrm-web/src/assets/i18n/requests/tr.json
    globcrm-web/src/app/features/quotes/quotes.routes.ts
    globcrm-web/src/app/features/requests/requests.routes.ts
  </files>
  <action>
**Quotes scope:**

1. Read ALL component files under `features/quotes/` (list, detail, form -- form may be inline template). Catalog every hardcoded English string.

2. Create `assets/i18n/quotes/en.json` and `tr.json`:
   - `title`: "Quotes"
   - `list.*`: title, subtitle, addButton, empty state, status filter labels
   - `detail.*`: title, tabs, field labels (quoteNumber, status, deal, company, contact, validUntil, subtotal, discount, tax, total, notes, terms, created, lastUpdated), section headers, line item labels (product, quantity, unitPrice, discount, subtotal, total), empty states
   - `form.*`: createTitle, editTitle, field labels, line item management labels (addLineItem, removeLineItem)
   - `messages.*`: all snackbar messages (save, delete, status change, PDF generation, send success/failure)
   - `pdf.*`: any PDF-related labels (generate, download, preview)

3. Wire `provideTranslocoScope('quotes')` in quotes.routes.ts.

4. Add `TranslocoPipe` and wire all template strings. Inject `TranslocoService` for snackbar calls.

**Requests scope:**

1. Read ALL component files under `features/requests/` (list, detail, form -- likely all inline templates per research). Catalog every hardcoded string.

2. Create `assets/i18n/requests/en.json` and `tr.json`:
   - `title`: "Requests"
   - `list.*`: title, subtitle, addButton, empty state, status filter labels
   - `detail.*`: title, tabs, field labels (subject, type, status, priority, requester, assignee, description, resolution, created, lastUpdated), section headers, empty states
   - `form.*`: createTitle, editTitle, field labels
   - `messages.*`: all snackbar messages

3. Wire `provideTranslocoScope('requests')` in requests.routes.ts.

4. Add `TranslocoPipe` and wire all template strings.

Turkish translations: Quotes = "Teklifler", Requests = "Talepler". Keep formal "siz" form and professional vocabulary. Line item terms: Urun (Product), Miktar (Quantity), Birim Fiyat (Unit Price), Ara Toplam (Subtotal), Toplam (Total).

For common labels, use global `common.*` keys. For parameterized strings (counts, names), use Transloco interpolation: `{{ 'key' | transloco:{ param: value } }}`.
  </action>
  <verify>
Run `cd globcrm-web && npx ng build --configuration development 2>&1 | head -50`. Verify scope wiring: `grep -rn "provideTranslocoScope" src/app/features/quotes/ src/app/features/requests/ --include="*.ts"`. Verify key parity for each scope.
  </verify>
  <done>Quotes and requests scopes created with EN/TR JSON files, routes wired, all component templates using transloco pipe, all snackbar calls translated. Angular builds without errors.</done>
</task>

</tasks>

<verification>
- `cd globcrm-web && npx ng build --configuration development` compiles without errors
- All four route files have provideTranslocoScope wired
- Eight new JSON files created with identical EN/TR key structures
- Run dev server, navigate to Activities list in Turkish -- all labels display in Turkish
</verification>

<success_criteria>
- Activities, products, quotes, requests each have provideTranslocoScope in route files
- Eight new JSON files (en.json + tr.json for each scope) with comprehensive translations
- All component templates in these four features use transloco pipe
- All snackBar.open() calls use translated messages
- Angular project compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/28-localization-string-extraction/28-03-SUMMARY.md`
</output>
