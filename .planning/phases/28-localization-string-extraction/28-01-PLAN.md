---
phase: 28-localization-string-extraction
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - globcrm-web/src/assets/i18n/en.json
  - globcrm-web/src/assets/i18n/tr.json
  - globcrm-web/src/app/shared/components/dynamic-table/dynamic-table.component.ts
  - globcrm-web/src/app/shared/components/dynamic-table/dynamic-table.component.html
  - globcrm-web/src/app/shared/components/dynamic-table/column-picker.component.ts
  - globcrm-web/src/app/shared/components/filter-panel/filter-panel.component.ts
  - globcrm-web/src/app/shared/components/filter-panel/filter-panel.component.html
  - globcrm-web/src/app/shared/components/filter-chips/filter-chips.component.ts
  - globcrm-web/src/app/shared/components/filter-chips/filter-chips.component.html
  - globcrm-web/src/app/shared/components/entity-preview-sidebar/entity-preview-sidebar.component.ts
  - globcrm-web/src/app/shared/components/entity-preview-sidebar/entity-preview-sidebar.component.html
  - globcrm-web/src/app/shared/components/entity-attachments/entity-attachments.component.ts
  - globcrm-web/src/app/shared/components/entity-form-dialog/entity-form-dialog.component.ts
  - globcrm-web/src/app/shared/components/summary-tab/entity-summary-tab.component.ts
  - globcrm-web/src/app/shared/components/summary-tab/entity-summary-tab.component.html
  - globcrm-web/src/app/shared/components/entity-timeline/entity-timeline.component.ts
  - globcrm-web/src/app/shared/components/related-entity-tabs/related-entity-tabs.component.ts
  - globcrm-web/src/app/shared/components/saved-views/view-sidebar.component.ts
  - globcrm-web/src/app/shared/components/saved-views/view-sidebar.component.html
  - globcrm-web/src/app/shared/components/confirm-delete-dialog/confirm-delete-dialog.component.ts
  - globcrm-web/src/app/shared/components/global-search/global-search.component.ts
  - globcrm-web/src/app/features/notifications/notification-center/notification-center.component.ts
  - globcrm-web/src/app/shared/services/slide-in-panel/slide-in-panel.component.ts
  - globcrm-web/src/app/shared/components/quick-action-bar/quick-action-bar.component.ts
  - globcrm-web/src/app/shared/components/rich-text-editor/rich-text-editor.component.ts
autonomous: true
requirements:
  - LOCL-03
  - LOCL-10

must_haves:
  truths:
    - "All shared component labels (table headers, filter buttons, empty states, action buttons) render in the selected language"
    - "Shared component snackbar messages (attachment upload/delete, form dialog save) display translated text"
    - "Global translation JSON files contain all shared/common keys with both EN and TR values"
  artifacts:
    - path: "globcrm-web/src/assets/i18n/en.json"
      provides: "Extended global English translations with common, table, filter, dialog, attachment, preview, views, messages sections"
      contains: "common"
    - path: "globcrm-web/src/assets/i18n/tr.json"
      provides: "Extended global Turkish translations with identical key structure"
      contains: "common"
  key_links:
    - from: "globcrm-web/src/app/shared/components/dynamic-table/dynamic-table.component.html"
      to: "globcrm-web/src/assets/i18n/en.json"
      via: "transloco pipe referencing common.table.* keys"
      pattern: "common\\.table\\."
    - from: "globcrm-web/src/app/shared/components/filter-panel/filter-panel.component.html"
      to: "globcrm-web/src/assets/i18n/en.json"
      via: "transloco pipe referencing common.filters.* keys"
      pattern: "common\\.filters\\."
    - from: "globcrm-web/src/app/shared/components/confirm-delete-dialog/confirm-delete-dialog.component.ts"
      to: "globcrm-web/src/assets/i18n/en.json"
      via: "transloco pipe referencing common.dialog.* keys"
      pattern: "common\\.dialog\\."
---

<objective>
Extract all hardcoded strings from shared components into global translation keys and extend the global EN/TR JSON files with comprehensive common sections.

Purpose: Shared components (DynamicTable, FilterPanel, EntityPreviewSidebar, ConfirmDeleteDialog, etc.) are used across all features. Translating them first provides the foundation that all feature-scoped plans depend on for a complete i18n experience. These components use global keys (not feature-scoped) since they appear in every feature area.

Output: Extended global en.json/tr.json with all shared component keys; all ~25+ shared components wired with TranslocoPipe and transloco pipe references replacing hardcoded English strings.
</objective>

<execution_context>
@C:/Users/maliy/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/maliy/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-localization-string-extraction/28-CONTEXT.md
@.planning/phases/28-localization-string-extraction/28-RESEARCH.md
@.planning/phases/27-localization-foundation/27-04-SUMMARY.md
@globcrm-web/src/assets/i18n/en.json
@globcrm-web/src/assets/i18n/tr.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extend global EN/TR JSON files with all shared component translation keys</name>
  <files>
    globcrm-web/src/assets/i18n/en.json
    globcrm-web/src/assets/i18n/tr.json
  </files>
  <action>
Read every shared component under `globcrm-web/src/app/shared/components/` (both HTML template files and inline template strings in TS files) to catalog all hardcoded English strings. Also scan for snackBar.open() calls in these files. Additionally read the notification-center component at `globcrm-web/src/app/features/notifications/notification-center/notification-center.component.ts` (inline template) and the slide-in-panel at `globcrm-web/src/app/shared/services/slide-in-panel/slide-in-panel.component.ts`.

Extend the existing global en.json with new sections while preserving all existing keys (`common`, `nav`, `auth`, `userMenu`). Add these new sections under `common`:

- `common.ok`: "OK" (snackbar action)
- `common.dismiss`: "Dismiss"
- `common.add`: "Add"
- `common.remove`: "Remove"
- `common.name`: "Name"
- `common.email`: "Email"
- `common.status`: "Status"
- `common.type`: "Type"
- `common.date`: "Date"
- `common.description`: "Description"
- `common.phone`: "Phone"
- `common.owner`: "Owner"
- `common.none`: "None"
- `common.total`: "Total"
- `common.view`: "View"
- `common.copy`: "Copy"
- `common.table.*`: Extend existing table section with `records`, `viewDetails`, `editRow`, `deleteRow`, `quickSearch`, `selectAll`, `deselectAll`, `bulkActions`, `selectedCount` (parameterized: "{{count}} selected"), `noData` (keep existing), `columns` (keep existing)
- `common.filters.*`: `advancedFilters`, `noFilters`, `addFiltersHint`, `field`, `operator`, `value`, `addFilter`, `clearAll`, `applyFilters`, `active` (parameterized: "{{count}} active")
- `common.dialog.*`: `confirmDelete`, `deleteWarning` (parameterized: "Are you sure you want to delete the {{type}} \"{{name}}\"?"), `cannotBeUndone`, `confirm`, `cancel`
- `common.attachments.*`: `title`, `upload`, `download`, `delete`, `uploaded` (parameterized), `uploadFailed`, `downloadFailed`, `deleted`, `deleteFailed`, `previewFailed`, `noAttachments`, `dragDrop`, `maxSize`
- `common.preview.*`: `openFullRecord`, `closePreview`, `customFields`, `noData`
- `common.views.*`: `saveView`, `savedViews`, `createView`, `viewName`, `setAsDefault`, `deleteView`, `newView`, `editView`, `defaultView`, `noViews`
- `common.timeline.*`: `title`, `noEvents`, `showMore`, `loadingEvents`
- `common.notifications.*`: `title`, `markAllRead`, `noNotifications`, `clearAll`, `viewAll`
- `common.search.*`: `globalSearch`, `placeholder`, `noResults`, `recentSearches`, `clearRecent`
- `common.messages.*`: `createdSuccess`, `createdFailed`, `updatedSuccess`, `updatedFailed`, `deletedSuccess`, `deletedFailed`, `loadFailed`, `saveFailed`, `copySuccess` (all parameterized with `{{type}}` where applicable)
- `common.quickActions.*`: strings from quick-action-bar component
- `common.columnPicker.*`: strings from column-picker component (at `shared/components/dynamic-table/column-picker.component.ts`)
- `common.richText.*`: strings from rich-text-editor component (placeholder, toolbar labels if any)

Create the matching tr.json with Turkish translations for ALL keys. Use formal "siz" form. Keep English loanwords (Dashboard, Pipeline, Lead, CRM) in Turkish translations. Follow business Turkish tone per CONTEXT.md decisions.

IMPORTANT: Read each shared component template carefully before writing the JSON to ensure completeness. Do NOT guess at strings -- extract the actual text content from each component.

Preserve all existing keys in both files. Use camelCase key naming per Phase 27 precedent. Use nested JSON structure matching Phase 27 patterns.
  </action>
  <verify>
Run `node -e "const en=require('./globcrm-web/src/assets/i18n/en.json'); const tr=require('./globcrm-web/src/assets/i18n/tr.json'); const ek=JSON.stringify(Object.keys(en.common).sort()); const tk=JSON.stringify(Object.keys(tr.common).sort()); console.log('EN common keys:', ek.length, 'TR common keys:', tk.length, 'Match:', ek===tk);"` confirms key parity between EN and TR common sections.
  </verify>
  <done>Global en.json and tr.json contain all shared component string keys with complete Turkish translations. No new sections are missing between EN and TR files. All existing Phase 27 keys are preserved.</done>
</task>

<task type="auto">
  <name>Task 2: Wire TranslocoPipe and replace hardcoded strings in all shared components</name>
  <files>
    globcrm-web/src/app/shared/components/dynamic-table/dynamic-table.component.ts
    globcrm-web/src/app/shared/components/dynamic-table/dynamic-table.component.html
    globcrm-web/src/app/shared/components/dynamic-table/column-picker.component.ts
    globcrm-web/src/app/shared/components/filter-panel/filter-panel.component.ts
    globcrm-web/src/app/shared/components/filter-panel/filter-panel.component.html
    globcrm-web/src/app/shared/components/filter-chips/filter-chips.component.ts
    globcrm-web/src/app/shared/components/filter-chips/filter-chips.component.html
    globcrm-web/src/app/shared/components/entity-preview-sidebar/entity-preview-sidebar.component.ts
    globcrm-web/src/app/shared/components/entity-preview-sidebar/entity-preview-sidebar.component.html
    globcrm-web/src/app/shared/components/entity-attachments/entity-attachments.component.ts
    globcrm-web/src/app/shared/components/entity-form-dialog/entity-form-dialog.component.ts
    globcrm-web/src/app/shared/components/summary-tab/entity-summary-tab.component.ts
    globcrm-web/src/app/shared/components/summary-tab/entity-summary-tab.component.html
    globcrm-web/src/app/shared/components/entity-timeline/entity-timeline.component.ts
    globcrm-web/src/app/shared/components/related-entity-tabs/related-entity-tabs.component.ts
    globcrm-web/src/app/shared/components/saved-views/view-sidebar.component.ts
    globcrm-web/src/app/shared/components/saved-views/view-sidebar.component.html
    globcrm-web/src/app/shared/components/confirm-delete-dialog/confirm-delete-dialog.component.ts
    globcrm-web/src/app/shared/components/global-search/global-search.component.ts
    globcrm-web/src/app/features/notifications/notification-center/notification-center.component.ts
    globcrm-web/src/app/shared/services/slide-in-panel/slide-in-panel.component.ts
    globcrm-web/src/app/shared/components/quick-action-bar/quick-action-bar.component.ts
    globcrm-web/src/app/shared/components/rich-text-editor/rich-text-editor.component.ts
  </files>
  <action>
For every shared component under `globcrm-web/src/app/shared/components/`, plus the notification-center component at `features/notifications/notification-center/` and the slide-in-panel at `shared/services/slide-in-panel/`:

1. **Add TranslocoPipe to imports array** if not already present: `import { TranslocoPipe } from '@jsverse/transloco';` and add `TranslocoPipe` to the component's `imports: []` array.

2. **For components with snackBar.open() calls**: Inject TranslocoService (`private readonly translocoService = inject(TranslocoService);`) and replace hardcoded message strings with `this.translocoService.translate('common.messages.keyName')`. Use `this.translocoService.translate('common.ok')` for snackbar action buttons.

3. **Replace all hardcoded strings in templates** (HTML files and inline template strings):
   - Static text content: `"No data available"` -> `{{ 'common.table.noData' | transloco }}`
   - Attribute bindings: `placeholder="Search..."` -> `[placeholder]="'common.search.placeholder' | transloco"`
   - aria-labels: `aria-label="Close"` -> `[attr.aria-label]="'common.close' | transloco"`
   - matTooltip: `matTooltip="View details"` -> `[matTooltip]="'common.table.viewDetails' | transloco"`
   - mat-label: `<mat-label>Search</mat-label>` -> `<mat-label>{{ 'common.search' | transloco }}</mat-label>`
   - Conditional text: `{{ isEdit ? 'Edit' : 'Create' }}` -> `{{ (isEdit ? 'common.edit' : 'common.create') | transloco }}`

4. **DO NOT translate**:
   - Dynamic data values (entity names, user-generated content like `{{ contact.fullName }}`)
   - CSS class names, component selectors
   - Enum values that come from the API (these will be handled with a mapping approach)

5. **Shared components to process** (read each, find all hardcoded strings, apply transloco):
   - dynamic-table (HTML template + column-picker at `shared/components/dynamic-table/column-picker.component.ts`): table headers, empty states, action buttons, pagination labels, bulk action text, search placeholder, column picker labels
   - filter-panel (HTML template): filter labels, operator labels, add/clear/apply buttons
   - filter-chips (HTML template): chip labels, clear all
   - entity-preview-sidebar (HTML template): header, close button, tabs, open full record
   - entity-attachments (inline template): upload, download, delete labels, empty state, snackbar messages
   - entity-form-dialog (inline template): save/cancel, title patterns, snackbar messages
   - entity-summary-tab (HTML template at `shared/components/summary-tab/`): section headers, empty states
   - entity-timeline (inline template): title, empty state, show more
   - related-entity-tabs (inline template): tab labels if hardcoded
   - saved-views / view-sidebar: view management labels, save/delete/default buttons
   - confirm-delete-dialog (inline template): title, message, buttons
   - global-search (inline template): search placeholder, no results, recent searches
   - notification-center (inline template at `features/notifications/notification-center/`): title, mark all read, empty state. This component uses GLOBAL keys (common.notifications.*) since it has no route/scope -- it's embedded in the navbar shell.
   - slide-in-panel (inline template at `shared/services/slide-in-panel/`): close button label
   - quick-action-bar (inline template): action labels
   - rich-text-editor: placeholder text

All shared components use GLOBAL keys (prefixed with `common.*`), NOT scoped keys, because they appear across all features.
  </action>
  <verify>
Run `cd globcrm-web && npx ng build --configuration development 2>&1 | head -50` to verify no compilation errors. Then run `grep -r "TranslocoPipe" src/app/shared/components/ --include="*.ts" -l | wc -l` to confirm all shared components have TranslocoPipe imported. Also verify notification-center: `grep "TranslocoPipe" src/app/features/notifications/notification-center/notification-center.component.ts`.
  </verify>
  <done>All shared components have TranslocoPipe imported, all hardcoded English strings replaced with transloco pipe references to global keys, all snackBar.open() calls use translocoService.translate() for messages and action buttons. Angular builds without errors.</done>
</task>

</tasks>

<verification>
- `cd globcrm-web && npx ng build --configuration development` compiles without errors
- Global en.json and tr.json have identical key structures
- `grep -rn "TranslocoPipe" globcrm-web/src/app/shared/components/ --include="*.ts"` shows all shared components importing TranslocoPipe
- `grep "TranslocoPipe" globcrm-web/src/app/features/notifications/notification-center/notification-center.component.ts` confirms notification-center is wired
- Spot-check: run dev server, switch to Turkish, open any list page -- table headers, empty states, filter labels, action buttons should display in Turkish
</verification>

<success_criteria>
- All shared components (~25+) have TranslocoPipe in their imports array
- All hardcoded English strings in shared component templates replaced with transloco pipe references
- All snackBar.open() calls in shared components use translated messages
- Global en.json extended with common.table, common.filters, common.dialog, common.attachments, common.preview, common.views, common.timeline, common.notifications, common.search, common.messages sections
- Global tr.json has identical key structure with Turkish translations (formal "siz" form, English loanwords preserved)
- Angular project compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/28-localization-string-extraction/28-01-SUMMARY.md`
</output>
